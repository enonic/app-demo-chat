<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport"
          content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=1, minimum-scale=1.0, maximum-scale=1.0"/>

    <title>Enonic Demo Chat</title>

    <script data-th-src="${portal.assetUrl({'_path=js/vendor/webcomponents/webcomponents-lite.min.js'})}"></script>
    <script data-th-src="${portal.assetUrl({'_path=js/vendor/jquery-3.1.1.min.js'})}"></script>

</head>
<body data-portal-component-type="page" class="page-default__body">

default1

<h1>this is a test</h1>


<div id="wc__container" style="height:600px; max-height: 100vh;">
    <link rel=“import” href=“http://localhost:8080/admin/portal/preview/draft/chat/chat”>

</div>




<script>
    function createMorseChatContent() {
        var div = document.createElement("div");
        div.setAttribute("class", "wc__content");
        div.classList.add("hidden");
        div.appendChild(createMorseChatLink(div));

        //document.getElementsByTagName("body")[0].appendChild(div);
        document.getElementById('wc__container').appendChild(div);

        return div;
    }

    function createMorseChatLink(container) {
        var link = document.createElement("link");

        link.setAttribute("rel", "import");
        link.setAttribute("href", "chat");


        link.onload = function () {
            container.appendChild(link.import.querySelector('.morse-chat'));
        };

        return link;
    }

    createMorseChatContent();
</script>


</body>
</html>
